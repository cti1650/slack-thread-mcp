{
  "_comment": "Claude Code settings.json / settings.local.json の設定例",
  "_usage": "このファイルの内容を .claude/settings.json または .claude/settings.local.json にコピーしてください",
  "_env_note": ".env ファイルは SessionStart フックで読み込まれます。プロジェクトルートに .env を配置してください",
  "_jq_note": "jq コマンドが必要です: macOS は brew install jq、Linux は apt install jq",
  "permissions": {
    "allow": [
      "Bash(npx slack-thread-mcp *)",
      "Bash(npx slack-notify *)",
      "Bash(node build/cli.js *)"
    ]
  },
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "SESSION_ID=$(cat | jq -r '.session_id // empty'); if [ -n \"$SESSION_ID\" ]; then echo \"CLAUDE_SESSION_ID=$SESSION_ID\" >> \"$CLAUDE_ENV_FILE\"; fi; if [ -f \"${CLAUDE_PROJECT_DIR}/.env\" ]; then set -a && source \"${CLAUDE_PROJECT_DIR}/.env\" && set +a && env | grep -E '^SLACK_|^THREAD_STATE_PATH=' >> \"$CLAUDE_ENV_FILE\"; fi"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx slack-thread-mcp start --job-id=${CLAUDE_SESSION_ID:-$(uuidgen)} --title=\"Claude Code Task\""
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "TOOL_NAME=$(cat | jq -r '.tool_name // \"unknown\"'); npx slack-thread-mcp update --job-id=${CLAUDE_SESSION_ID:-default} --message=\"Tool: $TOOL_NAME\""
          }
        ]
      }
    ],
    "PermissionRequest": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "TOOL_NAME=$(cat | jq -r '.tool_name // \"unknown\"'); npx slack-thread-mcp waiting --job-id=${CLAUDE_SESSION_ID:-default} --reason=\"権限確認待ち: $TOOL_NAME\""
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx slack-thread-mcp update --job-id=${CLAUDE_SESSION_ID:-default} --message=\"応答完了\" --level=debug"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx slack-thread-mcp complete --job-id=${CLAUDE_SESSION_ID:-default} --summary=\"Session completed\""
          }
        ]
      }
    ]
  }
}
